---
- hosts: dev
  become: yes 
  remote_user: ec2-user
  tasks:
     - name : install apache
       yum: name={{ item }} state=present
       with_items:
       - https
       - php
       - php-msql
     - name download Wordpress
       get_url: url=http://wordpress.org/wordpress-latest.tar.gz dest=/var/www/html/wordpress.tar.gz force=yes
     - name: Extract wordpress
         command: "tar xzf /var/www/html/wordpress.tar.gz -C /var/www/html --strip-components 1"
     - name: make my directory tree readable
       file:
         path: /var/www/html
         mode: u=rwX,g=rX,o=rX
         recurse: yes
         owner: apache
         group: apache
     - name: make sure apache is started now at boot.
       service: name=http state=started enabled=yes
